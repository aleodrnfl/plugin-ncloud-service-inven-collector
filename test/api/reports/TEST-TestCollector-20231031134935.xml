<?xml version="1.0" encoding="UTF-8"?>
<testsuite name="TestCollector-20231031134935" tests="3" file=".py" time="0.816" timestamp="2023-10-31T13:49:36" failures="0" errors="0" skipped="0">
	<testcase classname="TestCollector" name="test_collect" time="0.785" timestamp="2023-10-31T13:49:36" file="test_cloudservice_api.py" line="53">
		<system-out><![CDATA[<generator object _ClientInterceptor._generate_response at 0x0000000006355580>
{'match_rules': {'1': ['name', 'group', 'provider']},
 'resource': {'group': 'ComputeServer',
              'is_major': True,
              'is_primary': True,
              'labels': ['Compute', 'Server'],
              'metadata': {'view': {'search': [{'key': 'server_id',
                                                'name': 'Server ID'},
                                               {'key': 'data.ip_addresses',
                                                'name': 'IP Address'},
                                               {'key': 'data.compute.instance_id',
                                                'name': 'Instance ID'},
                                               {'enums': {'DEALLOCATED': {'label': 'Deallocated'},
                                                          'RUNNING': {'label': 'Running'},
                                                          'STOPPED': {'label': 'Stopped'},
                                                          'SUSPENDED': {'label': 'Suspended'},
                                                          'TERMINATED': {'label': 'Terminated'}},
                                                'key': 'data.compute.instance_state',
                                                'name': 'Instance State'},
                                               {'key': 'data.compute.instance_type',
                                                'name': 'Instance Type'},
                                               {'key': 'data.compute.keypair',
                                                'name': 'Key Pair'},
                                               {'key': 'data.compute.az',
                                                'name': 'Availability Zone'},
                                               {'key': 'data.nics.public_ip_address',
                                                'name': 'Public IP Address'},
                                               {'key': 'data.nics.tags.public_dns',
                                                'name': 'Public DNS'},
                                               {'data_type': 'float',
                                                'key': 'data.hardware.memory',
                                                'name': 'Memory'},
                                               {'key': 'account',
                                                'name': 'Account ID'},
                                               {'key': 'launched_at',
                                                'name': 'Launched'}],
                                    'table': {'layout': {'name': '',
                                                         'options': {'fields': [{'key': 'data.compute.instance_state',
                                                                                 'name': 'Instance '
                                                                                         'State',
                                                                                 'options': {'PROVISIONING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                              'type': 'state'},
                                                                                             'REPAIRING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                           'type': 'state'},
                                                                                             'RUNNING': {'options': {'icon': {'color': 'green.500'}},
                                                                                                         'type': 'state'},
                                                                                             'STAGING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                         'type': 'state'},
                                                                                             'STOPPING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                          'type': 'state'},
                                                                                             'SUSPENDED': {'options': {'icon': {'color': 'red.500'},
                                                                                                                       'text_color': 'red.500'},
                                                                                                           'type': 'state'},
                                                                                             'SUSPENDING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                            'type': 'state'},
                                                                                             'TERMINATED': {'options': {'icon': {'color': 'red.500'},
                                                                                                                        'text_color': 'red.500'},
                                                                                                            'type': 'state'}},
                                                                                 'type': 'enum'},
                                                                                {'key': 'server_id',
                                                                                 'name': 'Server '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.instance_type',
                                                                                 'name': 'Instance '
                                                                                         'Type',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.hardware.core',
                                                                                 'name': 'Core',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.hardware.memory',
                                                                                 'name': 'Memory',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.scheduling.preemptible',
                                                                                 'name': 'Preemptible',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.instance_id',
                                                                                 'name': 'Instance '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.image',
                                                                                 'name': 'Image',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.az',
                                                                                 'name': 'Availability '
                                                                                         'Zone',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.primary_ip_address',
                                                                                 'name': 'Primary '
                                                                                         'IP',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.public_ip_address',
                                                                                 'name': 'Public '
                                                                                         'IP',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'account',
                                                                                 'name': 'Account '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'launched_at',
                                                                                 'name': 'Launched',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'}]},
                                                         'type': 'query-search-table'}},
                                    'widget': [{'name': 'Total Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0'},
                                                                              'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total vCPU Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0'},
                                                                              'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'key': 'data.hardware.core',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0',
                                                                                          'source_unit': 'GB'},
                                                                              'type': 'size'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'key': 'data.hardware.memory',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total Disk Size',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0',
                                                                                          'source_unit': 'BYTES'},
                                                                              'type': 'size'}},
                                                'query': {'aggregate': [{'unwind': {'path': 'data.disks'}},
                                                                        {'group': {'fields': [{'key': 'data.disks.size',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Count By Region',
                                                'options': {'chart_type': 'COLUMN',
                                                            'name_options': {'key': 'name',
                                                                             'name': None,
                                                                             'reference': {'reference_key': 'region_code',
                                                                                           'resource_type': 'inventory.Region'},
                                                                             'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'region_code',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'},
                                               {'name': 'Count By Instance '
                                                        'Type',
                                                'options': {'chart_type': 'TREEMAP'},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'data.compute.instance_type',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'},
                                               {'name': 'Count By Account',
                                                'options': {'chart_type': 'DONUT'},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'account',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'account',
                                                                      'operator': 'exists',
                                                                      'value': True},
                                                                     {'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'}]}},
              'name': 'Instance',
              'provider': 'naver_cloud',
              'resource_type': 'inventory.CloudService',
              'service_code': 'Compute Server',
              'tags': {'spaceone:icon': 'https://spaceone-custom-assets.s3.ap-northeast-2.amazonaws.com/console-assets/icons/cloud-services/naver_cloud/Compute_Engine.svg'}},
 'resource_type': 'inventory.CloudServiceType',
 'state': 'SUCCESS'}

{'match_rules': {'1': ['reference.resource_id',
                       'provider',
                       'cloud_service_type',
                       'cloud_service_group']},
 'message': "'LoginKey' object has no attribute 'keyName'",
 'resource': {'cloud_service_group': 'ComputeServer',
              'cloud_service_type': 'Server',
              'provider': 'naver_cloud',
              'resource_id': '20150943',
              'resource_type': 'inventory.CloudService'},
 'resource_type': 'inventory.ErrorResource',
 'state': 'FAILURE'}

{'match_rules': {'1': ['name', 'group', 'provider']},
 'resource': {'group': 'ComputeServer',
              'is_major': True,
              'is_primary': True,
              'labels': ['Compute', 'Autoscaling'],
              'metadata': {'view': {'search': [{'key': 'server_id',
                                                'name': 'Server ID'},
                                               {'key': 'data.ip_addresses',
                                                'name': 'IP Address'},
                                               {'key': 'data.compute.instance_id',
                                                'name': 'Instance ID'},
                                               {'enums': {'DEALLOCATED': {'label': 'Deallocated'},
                                                          'RUNNING': {'label': 'Running'},
                                                          'STOPPED': {'label': 'Stopped'},
                                                          'SUSPENDED': {'label': 'Suspended'},
                                                          'TERMINATED': {'label': 'Terminated'}},
                                                'key': 'data.compute.instance_state',
                                                'name': 'Instance State'},
                                               {'key': 'data.compute.instance_type',
                                                'name': 'Instance Type'},
                                               {'key': 'data.compute.keypair',
                                                'name': 'Key Pair'},
                                               {'key': 'data.compute.az',
                                                'name': 'Availability Zone'},
                                               {'key': 'data.nics.public_ip_address',
                                                'name': 'Public IP Address'},
                                               {'key': 'data.nics.tags.public_dns',
                                                'name': 'Public DNS'},
                                               {'data_type': 'float',
                                                'key': 'data.hardware.memory',
                                                'name': 'Memory'},
                                               {'key': 'account',
                                                'name': 'Account ID'},
                                               {'key': 'launched_at',
                                                'name': 'Launched'}],
                                    'table': {'layout': {'name': '',
                                                         'options': {'fields': [{'key': 'data.compute.instance_state',
                                                                                 'name': 'Instance '
                                                                                         'State',
                                                                                 'options': {'PROVISIONING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                              'type': 'state'},
                                                                                             'REPAIRING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                           'type': 'state'},
                                                                                             'RUNNING': {'options': {'icon': {'color': 'green.500'}},
                                                                                                         'type': 'state'},
                                                                                             'STAGING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                         'type': 'state'},
                                                                                             'STOPPING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                          'type': 'state'},
                                                                                             'SUSPENDED': {'options': {'icon': {'color': 'red.500'},
                                                                                                                       'text_color': 'red.500'},
                                                                                                           'type': 'state'},
                                                                                             'SUSPENDING': {'options': {'icon': {'color': 'yellow.500'}},
                                                                                                            'type': 'state'},
                                                                                             'TERMINATED': {'options': {'icon': {'color': 'red.500'},
                                                                                                                        'text_color': 'red.500'},
                                                                                                            'type': 'state'}},
                                                                                 'type': 'enum'},
                                                                                {'key': 'server_id',
                                                                                 'name': 'Server '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.instance_type',
                                                                                 'name': 'Instance '
                                                                                         'Type',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.hardware.core',
                                                                                 'name': 'Core',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.hardware.memory',
                                                                                 'name': 'Memory',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.scheduling.preemptible',
                                                                                 'name': 'Preemptible',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.instance_id',
                                                                                 'name': 'Instance '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.image',
                                                                                 'name': 'Image',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.az',
                                                                                 'name': 'Availability '
                                                                                         'Zone',
                                                                                 'type': 'text'},
                                                                                {'key': 'data.primary_ip_address',
                                                                                 'name': 'Primary '
                                                                                         'IP',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'data.compute.public_ip_address',
                                                                                 'name': 'Public '
                                                                                         'IP',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'account',
                                                                                 'name': 'Account '
                                                                                         'ID',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'},
                                                                                {'key': 'launched_at',
                                                                                 'name': 'Launched',
                                                                                 'options': {'is_optional': True},
                                                                                 'type': 'text'}]},
                                                         'type': 'query-search-table'}},
                                    'widget': [{'name': 'Total Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0'},
                                                                              'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total vCPU Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0'},
                                                                              'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'key': 'data.hardware.core',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total Count',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0',
                                                                                          'source_unit': 'GB'},
                                                                              'type': 'size'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'key': 'data.hardware.memory',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Total Disk Size',
                                                'options': {'value_options': {'key': 'value',
                                                                              'name': None,
                                                                              'options': {'default': '0',
                                                                                          'source_unit': 'BYTES'},
                                                                              'type': 'size'}},
                                                'query': {'aggregate': [{'unwind': {'path': 'data.disks'}},
                                                                        {'group': {'fields': [{'key': 'data.disks.size',
                                                                                               'name': 'value',
                                                                                               'operator': 'sum'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'card'},
                                               {'name': 'Count By Region',
                                                'options': {'chart_type': 'COLUMN',
                                                            'name_options': {'key': 'name',
                                                                             'name': None,
                                                                             'reference': {'reference_key': 'region_code',
                                                                                           'resource_type': 'inventory.Region'},
                                                                             'type': 'text'}},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'region_code',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'},
                                               {'name': 'Count By Instance '
                                                        'Type',
                                                'options': {'chart_type': 'TREEMAP'},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'data.compute.instance_type',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'},
                                               {'name': 'Count By Account',
                                                'options': {'chart_type': 'DONUT'},
                                                'query': {'aggregate': [{'group': {'fields': [{'name': 'value',
                                                                                               'operator': 'count'}],
                                                                                   'keys': [{'key': 'account',
                                                                                             'name': 'name'}]}}],
                                                          'filter': [{'key': 'account',
                                                                      'operator': 'exists',
                                                                      'value': True},
                                                                     {'key': 'provider',
                                                                      'operator': 'eq',
                                                                      'value': 'naver_cloud'},
                                                                     {'key': 'cloud_service_group',
                                                                      'operator': 'eq',
                                                                      'value': 'ComputeServer'},
                                                                     {'key': 'cloud_service_type',
                                                                      'operator': 'eq',
                                                                      'value': 'Instance'}]},
                                                'type': 'chart'}]}},
              'name': 'Instance',
              'provider': 'naver_cloud',
              'resource_type': 'inventory.CloudService',
              'service_code': 'Autoscaling',
              'tags': {'spaceone:icon': 'https://spaceone-custom-assets.s3.ap-northeast-2.amazonaws.com/console-assets/icons/cloud-services/naver_cloud/Compute_Engine.svg'}},
 'resource_type': 'inventory.CloudServiceType',
 'state': 'SUCCESS'}

]]></system-out>
	</testcase>
	<testcase classname="TestCollector" name="test_init" time="0.010" timestamp="2023-10-31T13:49:36" file="test_cloudservice_api.py" line="43">
		<system-out><![CDATA[{'metadata': {'cloud_service_group_map': {'Compute': ['ServerInstanceManager',
                                                      'AutoscalingManager'],
                                          'Content Delivery': ['CdnManager'],
                                          'Database': ['CloudDBManager'],
                                          'Management': ['MonitoringManager'],
                                          'Networking': ['VPCNetworkManager'],
                                          'Storage': ['ObjectStorageManager',
                                                      'ArchiveStorageManager']},
              'filter_format': [],
              'supported_features': ['garbage_collection'],
              'supported_resource_type': ['inventory.CloudService',
                                          'inventory.CloudServiceType',
                                          'inventory.Region',
                                          'inventory.ErrorResource'],
              'supported_schedules': ['hours']}}

]]></system-out>
	</testcase>
	<testcase classname="TestCollector" name="test_verify" time="0.021" timestamp="2023-10-31T13:49:36" file="test_cloudservice_api.py" line="47">
		<system-out><![CDATA[{}

]]></system-out>
	</testcase>
</testsuite>
